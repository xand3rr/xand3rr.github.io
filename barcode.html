<!DOCTYPE html>
<html>
<head>
    <title>Barcode Scanner PoC with Quagga2</title>
    <script type="module">
        import Quagga from 'https://cdn.jsdelivr.net/npm/@ericblade/quagga2@1.0.0-beta.10/dist/quagga.min.js';

        document.addEventListener('DOMContentLoaded', function() {
            document.getElementById('startButton').addEventListener('click', function() {
                if (navigator.mediaDevices && typeof navigator.mediaDevices.getUserMedia === 'function') {
                    Quagga.init({
                        inputStream: {
                            type: "LiveStream",
                            constraints: {
                                width: 480,
                                height: 320,
                                facingMode: "environment"
                            },
                            target: document.querySelector('#interactive')
                        },
                        decoder: {
                            readers: ["ean_reader"]
                        }
                    }, function(err) {
                        if (err) {
                            console.error(err);
                            alert("Error starting Quagga2: " + err.message);
                            return;
                        }
                        Quagga.start();
                    });

                    Quagga.onDetected(function(result) {
                        document.getElementById('result').textContent = result.codeResult.code;
                    });
                } else {
                    alert('Camera access is not available on your device.');
                }
            }, false);
        });
    </script>
</head>
<body>

<div id="interactive" class="viewport"></div>
<button id="startButton">Start Scanning</button>
<div id="barcodeResult">Barcode resultaat: <span id="result"></span></div>

</body>
</html>
